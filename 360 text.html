<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arc-Aligned Degree Chart Generator</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        /* ** Global & Layout CSS - Final Design Scheme ** */
        :root {
            /* Color Palette */
            --primary-color: #2c3e50;      /* Dark Navy/Slate - for headings, main text */
            --secondary-color-start: #3498db; /* Bright Blue */
            --secondary-color-end: #2980b9;  /* Darker Blue for Gradient */
            --background-color: #f4f6f9;   /* Light Gray Background */
            --card-background: #ffffff;    /* White Cards */
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px;
            margin: 0;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d; 
            font-size: 1.1em;
            font-weight: 400;
        }

        /* --- Main Content Container (Chart + Inputs) --- */
        .content-container {
            display: flex;
            gap: 30px;
            width: 100%;
            max-width: 1200px;
        }

        /* --- Chart Wrapper (Left Side - Stays White) --- */
        #chart-section {
            flex: 1;
            padding: 30px;
            background: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 500px;
        }

        /* --- Input Wrapper (Right Side - Background Applied) --- */
        #input-section {
            width: 350px; 
            display: flex;
            flex-direction: column;
            gap: 20px;
            /* Applying the light gray background to the entire section */
            background-color: var(--background-color); 
        }

        .input-card {
            background: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
        }

        .input-card h2 {
            font-size: 1.3em;
            color: var(--primary-color);
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-weight: 500;
        }

        /* --- Download Button with Vertical Gradient --- */
        #download-button {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            /* Applying the gradient */
            background-image: linear-gradient(to bottom, var(--secondary-color-start), var(--secondary-color-end));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: opacity 0.3s;
            margin-top: 20px;
            font-weight: 500;
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.4); /* Blue shadow for depth */
        }

        #download-button:hover {
            opacity: 0.9;
        }

        /* ** Degree Chart Specific Styling ** */
        #main-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px; 
            background-color: white; 
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            position: relative; 
            border-radius: var(--border-radius);
        }

        #circle-container {
            width: 350px;
            height: 350px;
            position: relative;
            border-radius: 50%;
            border: 2px solid var(--primary-color); 
            background-color: #e0f7fa; 
            margin: 20px; 
        }

        .segment-line {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 175px; 
            height: 1px;
            background-color: #7f8c8d; 
            transform-origin: 0 0;
        }

        .external-degree-label {
            position: absolute;
            font-size: 16px;
            font-weight: 700;
            color: var(--primary-color);
            text-align: center;
        }
        
        .rotated-input-text {
            position: absolute;
            width: 80px; 
            font-size: 14px;
            text-align: center;
            color: #2980b9; 
            font-weight: 500;
            pointer-events: none; 
            white-space: nowrap; 
            transform-origin: center; 
        }
        
        /* --- Input List Styling (Inside Right Card) --- */
        #input-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .list-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9em;
        }

        .list-item span {
            font-weight: 500;
            color: var(--primary-color);
            width: 60px; 
            text-align: right;
        }

        .list-item input[type="text"] {
            padding: 8px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            width: calc(100% - 70px);
            transition: border-color 0.3s;
        }

        .list-item input[type="text"]:focus {
            border-color: var(--secondary-color-start);
            outline: none;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>&#x25CF; Arc-Aligned Degree Chart Generator</h1>
        <p>Input text and download the complete chart as a JPG.</p>
    </div>

    <div class="content-container">
        
        <div id="chart-section">
             <div id="main-wrapper">
                <div id="circle-container">
                    </div>
            </div>
        </div>

        <div id="input-section">
            <div class="input-card">
                <h2>Input Text List</h2>
                <div id="input-list">
                    </div>
            </div>
            
            <button id="download-button">
                &#x25BC; Download Chart as JPG
            </button>
        </div>
    </div>

    <script>
        // ** JAVASCRIPT LOGIC (The core functionality remains unchanged) **
        
        const circleContainer = document.getElementById('circle-container');
        const inputList = document.getElementById('input-list');
        const totalSegments = 12;
        const degreesPerSegment = 360 / totalSegments;
        
        // Define key radii (Half of circleContainer width/height)
        const center = 175; 
        const lineRadius = 175; 
        const externalLabelRadius = 195; 
        const textInsideRadius = 160;    
        const labelOffset = 15;         

        /**
         * Function to generate the circle divisions and the input list
         */
        function initializeChart() {
            for (let i = 0; i < totalSegments; i++) {
                const degree = i * degreesPerSegment;
                
                // Convert degree to radian for sin/cos. Adjust by -90 to align 0째 with the top.
                const angleRad = (degree - 90) * (Math.PI / 180); 

                // --- 1. Create the dividing line in the circle ---
                const line = document.createElement('div');
                line.className = 'segment-line';
                line.style.transform = `rotate(${degree}deg)`; 
                circleContainer.appendChild(line);

                // --- 2. Create the EXTERNAL degree label ---
                const label = document.createElement('div');
                label.className = 'external-degree-label';
                label.innerText = `${degree}째`;
                
                // Calculate position for the external label
                const xExt = center + externalLabelRadius * Math.cos(angleRad) - labelOffset; 
                const yExt = center + externalLabelRadius * Math.sin(angleRad) - labelOffset; 

                label.style.left = `${xExt}px`;
                label.style.top = `${yExt}px`;
                circleContainer.appendChild(label);
                
                // --- 3. Create the input field in the list ---
                const listItem = document.createElement('div');
                listItem.className = 'list-item';
                listItem.innerHTML = `
                    <span>${degree}째:</span>
                    <input 
                        type="text" 
                        data-degree="${degree}" 
                        placeholder="Enter text for ${degree}째"
                        oninput="updateCircleText(this)"
                    >
                `;
                inputList.appendChild(listItem);

                // --- 4. Create the corresponding dynamic text element INSIDE the circle ---
                const circleText = document.createElement('div');
                circleText.className = 'rotated-input-text';
                circleText.id = `text-${degree}`;
                
                // Calculate position for the text.
                const xInt = center + textInsideRadius * Math.cos(angleRad) - 40; 
                const yInt = center + textInsideRadius * Math.sin(angleRad) - 10; 

                circleText.style.left = `${xInt}px`;
                circleText.style.top = `${yInt}px`;

                // Rotation logic for Tangential Placement
                let rotation = degree; 
                
                if (degree >= 90 && degree <= 270) {
                     rotation += 180;
                } 
                
                // Rotate and shift vertically to align with the circumference arc
                circleText.style.transform = `rotate(${rotation}deg) translateY(-60px) translateX(20px)`; 
                
                circleContainer.appendChild(circleText);
            }
        }

        /**
         * Function to update the text inside the circle when the input changes
         */
        function updateCircleText(inputElement) {
            const degree = inputElement.getAttribute('data-degree');
            const targetTextElement = document.getElementById(`text-${degree}`);
            targetTextElement.innerText = inputElement.value;
        }

        /**
         * Function to handle the image download
         */
        document.getElementById('download-button').addEventListener('click', () => {
            const contentToCapture = document.getElementById('main-wrapper'); 

            html2canvas(contentToCapture, { 
                scale: 2, 
                logging: false,
                useCORS: true 
            }).then(canvas => {
                const imageURL = canvas.toDataURL('image/jpeg', 0.9); 

                const link = document.createElement('a');
                link.href = imageURL;
                link.download = 'arc_aligned_chart.jpg';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });
        });

        // Initialize the chart when the page loads
        initializeChart();
    </script>
</body>
</html>
